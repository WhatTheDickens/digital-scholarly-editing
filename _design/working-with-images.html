<p>The previous page explained how to build a basic timeline using TimelineJS. You saw there that the only way to include an image in your timeline is to point to the image file on the web. You do that by typing (or copy-pasting) the web address of the image file in the &ldquo;Media&rdquo; column of the spreadsheet for the appropriate row of the spreadsheet.</p>
<h2 id="working-with-iiif-images">Working with IIIF images</h2>
<p>Many manuscript images are available on the web using a standard called the &ldquo;International Image Interoperability Framework,&rdquo; or IIIF for short.</p>
<p>When images adhere to this standard and are served from a IIIF server, users can do more than simply point to them. It&rsquo;s possible to bring a IIIF-compliant image into a web page or other application in a way that re-sizes the image, crops it, rotates it, or performs some other action.</p>
<p>You perform these actions by following the protocols for the IIIF API. &ldquo;API&rdquo; is an abbreviation for &ldquo;Application Programming Interface.&rdquo; APIs enable web applications to interact with each other. You may not have seen the term before, but you likely make use of APIs regularly. The APIs for Google&rsquo;s web applications enable these applications to &ldquo;talk to&rdquo; each other and to other applications, so that, for example, Slack can display your Google docs or your email can display the details of an airline reservation you recently made. APIs make possible the popular web service <a href="https://ifttt.com/">If This, Then That</a>, which offers API-based "recipes" that enable you to do things like <a href="https://ifttt.com/applets/17461273d-email-me-nasa-image-of-the-day">get NASA's image of the day in your email</a>, send yourself <a href="https://ifttt.com/applets/29181631d-email-a-map-of-where-i-parked">an email with the location where you parked your car</a> or <a href="https://ifttt.com/applets/17952460d-a-spreadsheet-of-new-tweets-with-a-specific-hashtag-you-pick">save tweets with a hashtag you pick to a Google sheet</a>.</p>
<p>Let&rsquo;s take a look at the different ways you can display a manuscript image using the IIIF API, taking the <em>Walden</em> manuscript as our example.</p>
<h2 id="calling-an-image-at-full-size">Calling an image at full size</h2>
<p>Type the following address (also known as a &ldquo;URI&rdquo;) into your web browser&rsquo;s location bar and hit <code>Return</code> or <code>Enter</code>:</p>
<p><code>https://cdm16003.contentdm.oclc.org/digital/iiif/p16003coll16/8/full/full/0/default.jpg</code></p>
<p>It will take some time for the image to load, especially if you don&rsquo;t have a high-speed internet connection. High-quality scans of manuscript images have large file sizes so that researchers and other users can examine them in fine detail. The image you&rsquo;ve just loaded is 7.4 MB. It&rsquo;s 6751 pixels wide by 9000 pixels long.</p>
<p>Your browser probably loaded a scaled-down version of the image so that the entire image would fit on your screen. If you mouse over the image, you should see an icon of a magnifying glass with a &ldquo;+&rdquo; sign inside it. Clicking on the image should enlarge it to full size, so that you can see it in great detail. In most browsers, you can step down the size of the image using the keyboard combination <code>Ctrl</code> + <code>-</code> (Mac: <code>Command</code> + <code>-</code>). Similarly, you can step it up using <code>Ctrl</code> + <code>=</code> (Mac <code>Command</code> + <code>=</code>) You can save the image to your own computer by right-clicking and choosing &ldquo;Save Image As &hellip;&rdquo; or the equivalent.</p>
<p>The size of high-quality scans is one reason the IIIF standard is so important: if you had to use all these images at full size in your project, your users would spend a lot of time drumming their fingers, waiting for your images to arrive on their screens.</p>
<h2 id="calling-an-image-at-a-percentage-of-its-original-size">Calling an image at a percentage of its original size</h2>
<p>The URI you entered in your browser&rsquo;s location bar above should have (eventually!) delivered the first page of the &ldquo;A&rdquo; version of Thoreau&rsquo;s <em>Walden</em>. What if you wanted to call the image at a specified fraction of its original size so that it would load much faster?</p>
<p>You could do that by replacing the original URI you typed with the following:</p>
<p><code>https://cdm16003.contentdm.oclc.org/digital/iiif/p16003coll16/8/full/pct:10/0/default.jpg</code></p>
<p>When you hit <code>Return/Enter</code>, the image should load much, much faster. This image is 870 x 1160 pixels, with a file size of 136 KB &mdash; just under 2% of the original&rsquo;s size.</p>
<p>How do the two URIs differ? You have to look closely to see. Start at the end (&hellip;<code>default.jpg</code>) and trace your way back till you see this: <code>/full/pct:10/</code> Compare with the URI above, which reads, at the same location, <code>/full/full/</code>. The second URI delivers the image at 10% of its original size.</p>
<p>We can bring the reduced-size image into the present page by typing</p>
<p><code>![Page 1 of *Walden* Version A](https://cdm16003.contentdm.oclc.org/digital/iiif/p16003coll16/8/full/pct:10/0/default.jpg)</code>, and it will be displayed as below:</p>
<figure><img src="https://cdm16003.contentdm.oclc.org/digital/iiif/p16003coll16/8/full/pct:10/0/default.jpg" alt="Page 1 of Walden Version A" />
<figcaption>Page 1 of <em>Walden</em> Version A</figcaption>
</figure>
<h2 id="uri-syntax">URI syntax</h2>
<p>There&rsquo;s a regular pattern to the IIIF URIs, as explained on <a href="https://iiif.io/api/image/2.1/#uri-syntax">this page explaining the IIIF URI syntax</a>.</p>
<p>The basic template looks like this:</p>
<p><code>{scheme}://{server}{/prefix}/{identifier}/{region}/{size}/{rotation}/{quality}.{format}</code></p>
<p>In the URIs we&rsquo;ve been looking at,</p>
<ul>
<li><code>{scheme}</code> = https</li>
<li><code>{server}</code> = cdm16003.contentdm.oclc.org</li>
<li><code>{/prefix}</code> = /digital/iiif</li>
<li><code>{region}</code> = full</li>
<li><code>{size}</code> = full (first URI) or pct:10 (second URI)</li>
<li><code>{rotation}</code> = 0</li>
<li><code>{quality}</code> = default</li>
<li><code>{format}</code> = jpg</li>
</ul>
<p>For our purposes, what matters most are the following bits of the URI:</p>
<ul>
<li><em>region</em>: In both examples, the image displays the <strong>full</strong> two-dimensional extent of the image, rather than a limited section of it.</li>
<li><em>size</em>: In the first example, the image is displayed at its <strong>full</strong> size. In the second, it&rsquo;s dispalyed at <strong>pct:10</strong> (i.e., 10%) of its full size.</li>
<li><em>rotation</em>: In both examples, the rotation is <strong>0</strong>. We could replace <code>0</code> with <code>90</code>, <code>180</code>, or <code>270</code> to rotate the image clockwise by the corresponding number of degrees.</li>
</ul>
<h2 id="displaying-a-page-section">Displaying a page section</h2>
<p>To display a section of an image &mdash; in other words, a <em>region</em> other than <code>full</code> &mdash; you can specify the coordinates of the section by replacing <code>full</code> with <code>x,y,w,h</code> where</p>
<ul>
<li><code>x</code> = the number of pixels from the 0 position of the horizontal axis</li>
<li><code>y</code> = the number of pixels from the 0 position of the vertical axis</li>
<li><code>w</code> = the width of the region in pixels</li>
<li><code>h</code> = the height of the region in pixels.</li>
</ul>
<p>(Note that the <code>x,y</code> coordinates <code>0,0</code> represent the upper <em>left</em> corner of the image, and that the upper left corner of the <em>image</em> is not the same as the upper left corner of the manuscript page, since the gray margin surrounding the page is part of the image.)</p>
<p>So to display the bracketed and canceled passage on this page, we might call <code>https://cdm16003.contentdm.oclc.org/digital/iiif/p16003coll16/8/1150,6200,7000,2000/pct:30/0/default.jpg</code>, yielding this:</p>
<figure><img src="https://cdm16003.contentdm.oclc.org/digital/iiif/p16003coll16/8/1130,6200,7000,2000/pct:30/0/default.jpg" alt="Page region" />
<figcaption>Page region</figcaption>
</figure>
<p>Determining the right coordinates for a limited image region takes some finagling. If you download the image and open it in an image-viewing application such as Apple&rsquo;s Preview, you should be able to get approximate coordinates by dragging your cursor over the image. You can then pop the URI-with-coordinates into your browser&rsquo;s location bar and, by repeatedly adjusting them and refreshing the browser, ascertain that you&rsquo;re capturing the desired region.</p>
<p><strong>For your timeline project in ENGL 340, you don&rsquo;t need to worry about displaying an image section. If you have a strong desire to do so, make an appointment for a video chat with me.</strong></p>
<h2 id="rotating-images">Rotating images</h2>
<p>This, too, is unnecessary for your project, but the infomration is included here in case you&rsquo;d like to give rotating a try.</p>
<p>To rotate an image region, replace the <code>0</code> with the desired rotation (e.g., <code>90</code> for 90 degrees).</p>
<p>For example, the URI <code>https://cdm16003.contentdm.oclc.org/digital/iiif/p16003coll16/434/800,737,1450,5870/pct:30/90/default.jpg</code> will bring up the region with coordinates <code>800,737,1450,5870</code> on p.&nbsp;1 of the B-C Version (xml:id hm924v3n434 in the Google sheet manifest) rotated 90 degrees at 30%, making it easier to read what Thoreau has written vertically in the left margin:</p>
<p><a href="https://cdm16003.contentdm.oclc.org/digital/iiif/p16003coll16/434/800,737,1430,5870/pct:30/90/default.jpg"><img src="https://cdm16003.contentdm.oclc.org/digital/iiif/p16003coll16/434/800,737,1430,5870/pct:30/90/default.jpg" alt="Page region rotated 90 degrees" /></a></p>